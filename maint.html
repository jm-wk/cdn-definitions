
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maintenance Guide &#8212; cdn-definitions  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data" href="data.html" />
    <link rel="prev" title="User Guide" href="userguide.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="maintenance-guide">
<h1>Maintenance Guide<a class="headerlink" href="#maintenance-guide" title="Permalink to this headline">¶</a></h1>
<p>This document is intended for software engineers and release engineers responsible
for making updates to this project.</p>
<div class="section" id="is-your-data-appropriate-for-this-project">
<h2>Is your data appropriate for this project?<a class="headerlink" href="#is-your-data-appropriate-for-this-project" title="Permalink to this headline">¶</a></h2>
<p>The content delivery toolchain is driven by many pieces of metadata and it is not
necessarily clear which pieces of metadata shall be maintained as a part of this
project.</p>
<p>Consider these rules of thumb when deciding whether certain metadata fits here:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>Small dataset</strong></dt><dd><p>If your dataset consists of less than a hundred or so items, it may be
appropriate for this project. If it consists of thousands of items, it
is definitely not appropriate.</p>
</dd>
<dt><strong>Infrequent updates</strong></dt><dd><p>If you expect you’ll need to add/change pieces of data more often than at
each new RHEL minor release (i.e. more than a few times per year), this
is likely not the correct place to store your data.</p>
</dd>
<dt><strong>No synchronized releases</strong></dt><dd><p>If your data will have requirements similar to “This change to data must be
released in environment A on date X and no earlier, then environment B on date Y
and no earlier…”, this project is likely inappropriate.</p>
</dd>
<dt><strong>No secrets</strong></dt><dd><p>If you anticipate that your dataset may sometimes contain information not to be
published externally from Red Hat (for example, names of unannounced products),
your data can’t be added to this project.</p>
</dd>
<dt><strong>Additions only</strong></dt><dd><p>Most data hosted by this project is expected to be <em>added to</em>, and rarely if ever
<em>changed</em> or <em>removed</em>.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="requirement-minimal-dependencies">
<h2>Requirement: minimal dependencies<a class="headerlink" href="#requirement-minimal-dependencies" title="Permalink to this headline">¶</a></h2>
<p>For maximum portability, it is a requirement of this project that it is usable
with Python as old as version 2.6 and as new as the most recent Python 3.x at
any given point, with no dependencies on any additional Python modules beyond
those in the standard library.</p>
<p>This requirement only applies to the project’s package as distributed to PyPI.
It’s OK to add dependencies for the test suite or development scripts.</p>
</div>
<div class="section" id="json-vs-yaml">
<h2>JSON vs YAML<a class="headerlink" href="#json-vs-yaml" title="Permalink to this headline">¶</a></h2>
<p>This project publishes both JSON and YAML datasets.  Both datasets contain the same
data, merely in a different format.</p>
<p>The motivations for publishing the data in both formats include:</p>
<ul class="simple">
<li><p>It’s desired for the data to be somewhat human-readable and to include meaningful comments;
this is possible with YAML but not JSON.</p></li>
<li><p>It’s desired for the data to be loadable from Python with no added dependencies; this is
possible with JSON but not YAML.</p></li>
</ul>
<p>Hence, the project treats YAML as the authoritative data source and provides equivalent
JSON files as a convenience to downstream projects.</p>
<p>When making changes to the project, only the YAML files should be modified directly.
JSON files can be rebuilt using the <code class="docutils literal notranslate"><span class="pre">make-json</span></code> script.  It is recommended to use
a pre-commit hook for this; see the next section.</p>
<p>If you make an update to YAML files but forget to rebuild the JSON files, the project’s CI
system will detect this and reject your change.</p>
</div>
<div class="section" id="installing-pre-commit-hooks">
<h2>Installing pre-commit hooks<a class="headerlink" href="#installing-pre-commit-hooks" title="Permalink to this headline">¶</a></h2>
<p>When working on this project, it’s recommended to enable the project’s pre-commit hooks.
These hooks cover:</p>
<ul class="simple">
<li><p>ensuring any Python changes are formatted using the <code class="docutils literal notranslate"><span class="pre">black</span></code> autoformatter</p></li>
<li><p>ensuring JSON files are kept up-to-date with any YAML changes</p></li>
</ul>
<p>To prepare the hooks, run these commands (or equivalent):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pre</span><span class="o">-</span><span class="n">commit</span>
<span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
</pre></div>
</div>
<p>For more information about the pre-commit tool, see <a class="reference external" href="https://pre-commit.com/">https://pre-commit.com/</a>.</p>
</div>
<div class="section" id="downstream-projects">
<h2>Downstream projects<a class="headerlink" href="#downstream-projects" title="Permalink to this headline">¶</a></h2>
<p>Some known or expected uses of this dataset from downstream projects are listed here.
Be aware that changes to the dataset may require updates to packages for these projects.</p>
<blockquote>
<div><dl class="simple">
<dt><strong>exodus-lambda</strong></dt><dd><ul class="simple">
<li><p>Uses RHUI and origin aliases when resolving requests to the CDN.</p></li>
</ul>
</dd>
<dt><strong>engproduct-cli</strong></dt><dd><ul class="simple">
<li><p>Enforces that all defined “from RHUI” content sets use paths matching
RHUI aliases.</p></li>
</ul>
</dd>
<dt><strong>cdn-utils</strong></dt><dd><ul class="simple">
<li><p>Uses defined RHUI aliases to decide whether or not a given RHSM Pulp
repo is published via a RHUI alias; this influences configuration for
the repo.</p></li>
</ul>
</dd>
<dt><strong>manifest-api</strong></dt><dd><ul class="simple">
<li><p>Inherits a dependency on this dataset via <code class="docutils literal notranslate"><span class="pre">cdn-utils</span></code>.</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">cdn-definitions</a></h1>



<p class="blurb">Data definitions for Red Hat's content delivery network</p>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="userguide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Maintenance Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#is-your-data-appropriate-for-this-project">Is your data appropriate for this project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requirement-minimal-dependencies">Requirement: minimal dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-vs-yaml">JSON vs YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-pre-commit-hooks">Installing pre-commit hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downstream-projects">Downstream projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="userguide.html" title="previous chapter">User Guide</a></li>
      <li>Next: <a href="data.html" title="next chapter">Data</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Red Hat.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/maint.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/release-engineering/cdn-definitions" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>